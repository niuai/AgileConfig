(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{et2T:function(D,h,e){D.exports={summary:"summary___3-hGY",item:"item___2S4GX",name:"name___GPVZC",icon:"icon___1Ex7k",count:"count___1ev27",node_clients:"node_clients___3eye8",panel:"panel___JErwR"}},uQP7:function(D,h,e){"use strict";e.d(h,"d",function(){return A}),e.d(h,"a",function(){return G}),e.d(h,"c",function(){return $}),e.d(h,"b",function(){return N});var C=e("k1fw"),R=e("WmNS"),r=e.n(R),S=e("9og8"),I=e("sy1d");function A(){return g.apply(this,arguments)}function g(){return g=Object(S.a)(r.a.mark(function s(){return r.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(I.a)("/servernode/all",{}));case 1:case"end":return m.stop()}},s)})),g.apply(this,arguments)}function G(s){return P.apply(this,arguments)}function P(){return P=Object(S.a)(r.a.mark(function s(y){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(I.a)("/servernode/add",{method:"POST",data:Object(C.a)({},y)}));case 1:case"end":return o.stop()}},s)})),P.apply(this,arguments)}function $(s){return l.apply(this,arguments)}function l(){return l=Object(S.a)(r.a.mark(function s(y){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(I.a)("/servernode/delete",{method:"POST",data:Object(C.a)({},y)}));case 1:case"end":return o.stop()}},s)})),l.apply(this,arguments)}function N(s){return T.apply(this,arguments)}function T(){return T=Object(S.a)(r.a.mark(function s(y){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(I.a)("/RemoteServerProxy/AllClients_Reload?address="+y.address,{method:"POST"}));case 1:case"end":return o.stop()}},s)})),T.apply(this,arguments)}},yZnS:function(D,h,e){"use strict";e.r(h);var C=e("tJVT"),R=e("WmNS"),r=e.n(R),S=e("k1fw"),I=e("miYZ"),A=e("tsqr"),g=e("9og8"),G=e("2qtc"),P=e("kLXV"),$=e("tMyG"),l=e("q1tI"),N=e("sy1d");function T(){return s.apply(this,arguments)}function s(){return s=Object(g.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(N.a)("/report/appcount"));case 1:case"end":return n.stop()}},d)})),s.apply(this,arguments)}function y(){return m.apply(this,arguments)}function m(){return m=Object(g.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(N.a)("/report/configcount"));case 1:case"end":return n.stop()}},d)})),m.apply(this,arguments)}function o(){return U.apply(this,arguments)}function U(){return U=Object(g.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(N.a)("/report/nodecount"));case 1:case"end":return n.stop()}},d)})),U.apply(this,arguments)}function H(){return B.apply(this,arguments)}function B(){return B=Object(g.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(N.a)("/report/RemoteNodesStatus"));case 1:case"end":return n.stop()}},d)})),B.apply(this,arguments)}var K=e("26re"),L=e("+GxG"),_=e("U+PY"),J=e("uAnT"),k=e("et2T"),E=e.n(k),M=e("9kvl"),u=e("nKUr"),V=function(a){var n=Object(M.h)(),i=function(){return a.type=="node"?"#1890ff":a.type=="app"?"#faad14":a.type=="config"?"#13c2c2":a.type=="client"?"#52c41a":""},O=function(){var f="pages.home.summary."+a.type,p=n.formatMessage({id:f});return p};return Object(u.jsxs)("div",{className:E.a.item,style:{backgroundColor:i()},onClick:function(){var f=a.link;f&&M.f.push(f)},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:E.a.count,children:a.count}),Object(u.jsx)("div",{className:E.a.name,children:O()})]}),Object(u.jsx)("div",{className:E.a.icon,children:a.icon})]})},w=V,Y=function(a){var n,i,O=Object(l.useState)(0),v=Object(C.a)(O,2),f=v[0],p=v[1],t=Object(l.useState)(0),j=Object(C.a)(t,2),b=j[0],c=j[1];return Object(l.useEffect)(function(){y().then(function(F){return c(F)})},[]),Object(l.useEffect)(function(){T().then(function(F){return p(F)})},[]),Object(u.jsx)("div",{className:E.a.panel,children:Object(u.jsxs)("div",{className:E.a.summary,children:[Object(u.jsx)(w,{count:(n=a.nodeCount)!==null&&n!==void 0?n:0,type:"node",link:"/node",icon:Object(u.jsx)(K.a,{})}),Object(u.jsx)(w,{count:f,type:"app",link:"/app",icon:Object(u.jsx)(L.a,{})}),Object(u.jsx)(w,{count:b,type:"config",link:"/app",icon:Object(u.jsx)(_.a,{})}),Object(u.jsx)(w,{count:(i=a.clientCount)!==null&&i!==void 0?i:0,type:"client",link:"/client",icon:Object(u.jsx)(J.a,{})})]})})},Z=Y,W=e("uQP7"),Q=e("RCxd"),X=P.a.confirm,z=function(){var d=Object(g.a)(r.a.mark(function a(n){var i,O,v,f;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(M.d)(Object(M.e)()),O=A.default.loading(i.formatMessage({id:"adding"})),t.prev=2,t.next=5,Object(W.a)(Object(S.a)({},n));case 5:return v=t.sent,O(),f=v.success,f?A.default.success(i.formatMessage({id:"add_success"})):A.default.error(i.formatMessage({id:"add_fail"})),t.abrupt("return",f);case 12:return t.prev=12,t.t0=t.catch(2),O(),A.default.error(i.formatMessage({id:"add_fail"})),t.abrupt("return",!1);case 17:case"end":return t.stop()}},a,null,[[2,12]])}));return function(n){return d.apply(this,arguments)}}(),x=function(){var a=Object(l.useState)({clientCount:0,nodeCount:0}),n=Object(C.a)(a,2),i=n[0],O=n[1],v=function(){H().then(function(t){var j=0;t==null||t.forEach(function(c){c.server_status&&(j=j+c.server_status.clientCount)});var b=0;b=t.length,O({clientCount:j,nodeCount:b})})},f=function(){var p=Object(g.a)(r.a.mark(function t(){var j;return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(W.d)();case 2:return j=c.sent,c.abrupt("return",j.data.length>0);case 4:case"end":return c.stop()}},t)}));return function(){return p.apply(this,arguments)}}();return Object(l.useEffect)(function(){f().then(function(p){if(!p){console.log("No nodes plz add one !");var t="\u8282\u70B9\u5217\u8868\u4E3A\u7A7A\uFF0C\u662F\u5426\u6DFB\u52A0\u5F53\u524D\u8282\u70B9\u3010".concat(window.location.origin,"\u3011\u5230\u8282\u70B9\u5217\u8868\uFF1F");X({icon:Object(u.jsx)(Q.a,{}),content:t,onOk:function(){var b=window.location.origin;console.log(" try add ".concat(b," to node list ."));var c={address:b,remark:"\u63A7\u5236\u53F0\u8282\u70B9",status:0};z(c)},onCancel:function(){},okText:"\u9A6C\u4E0A\u6DFB\u52A0"})}})},[]),Object(l.useEffect)(function(){v()},[]),Object(l.useEffect)(function(){var p=setInterval(function(){v()},5e3);return function(){return clearInterval(p)}},[]),Object(u.jsx)($.a,{pageHeaderRender:!1,children:Object(u.jsx)(Z,{clientCount:i.clientCount,nodeCount:i.nodeCount})})},q=h.default=x}}]);
