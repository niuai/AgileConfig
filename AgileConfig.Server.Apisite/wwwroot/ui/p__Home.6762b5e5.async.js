(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{et2T:function(R,g,e){R.exports={summary:"summary___3-hGY",item:"item___2S4GX",name:"name___GPVZC",icon:"icon___1Ex7k",count:"count___1ev27",node_clients:"node_clients___3eye8",panel:"panel___JErwR"}},uQP7:function(R,g,e){"use strict";e.d(g,"d",function(){return N}),e.d(g,"a",function(){return G}),e.d(g,"c",function(){return U}),e.d(g,"b",function(){return A});var C=e("k1fw"),$=e("WmNS"),r=e.n($),S=e("9og8"),I=e("sy1d");function N(){return O.apply(this,arguments)}function O(){return O=Object(S.a)(r.a.mark(function o(){return r.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(I.a)("/servernode/all",{}));case 1:case"end":return m.stop()}},o)})),O.apply(this,arguments)}function G(o){return P.apply(this,arguments)}function P(){return P=Object(S.a)(r.a.mark(function o(b){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(I.a)("/servernode/add",{method:"POST",data:Object(C.a)({},b)}));case 1:case"end":return s.stop()}},o)})),P.apply(this,arguments)}function U(o){return l.apply(this,arguments)}function l(){return l=Object(S.a)(r.a.mark(function o(b){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(I.a)("/servernode/delete",{method:"POST",data:Object(C.a)({},b)}));case 1:case"end":return s.stop()}},o)})),l.apply(this,arguments)}function A(o){return D.apply(this,arguments)}function D(){return D=Object(S.a)(r.a.mark(function o(b){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(I.a)("/RemoteServerProxy/AllClients_Reload?address="+b.address,{method:"POST"}));case 1:case"end":return s.stop()}},o)})),D.apply(this,arguments)}},yZnS:function(R,g,e){"use strict";e.r(g);var C=e("tJVT"),$=e("WmNS"),r=e.n($),S=e("k1fw"),I=e("miYZ"),N=e("tsqr"),O=e("9og8"),G=e("2qtc"),P=e("kLXV"),U=e("tMyG"),l=e("q1tI"),A=e("sy1d");function D(){return o.apply(this,arguments)}function o(){return o=Object(O.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(A.a)("/report/appcount"));case 1:case"end":return n.stop()}},d)})),o.apply(this,arguments)}function b(){return m.apply(this,arguments)}function m(){return m=Object(O.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(A.a)("/report/configcount"));case 1:case"end":return n.stop()}},d)})),m.apply(this,arguments)}function s(){return w.apply(this,arguments)}function w(){return w=Object(O.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(A.a)("/report/nodecount"));case 1:case"end":return n.stop()}},d)})),w.apply(this,arguments)}function H(){return B.apply(this,arguments)}function B(){return B=Object(O.a)(r.a.mark(function d(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(A.a)("/report/RemoteNodesStatus"));case 1:case"end":return n.stop()}},d)})),B.apply(this,arguments)}var K=e("26re"),L=e("+GxG"),J=e("U+PY"),V=e("uAnT"),Y=e("et2T"),E=e.n(Y),T=e("9kvl"),u=e("nKUr"),Z=function(a){var n=Object(T.h)(),i=function(){return a.type=="node"?"#1890ff":a.type=="app"?"#faad14":a.type=="config"?"#13c2c2":a.type=="client"?"#52c41a":""},h=function(){var f="pages.home.summary."+a.type,p=n.formatMessage({id:f});return p};return Object(u.jsxs)("div",{className:E.a.item,style:{backgroundColor:i()},onClick:function(){var f=a.link;f&&T.f.push(f)},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:E.a.count,children:a.count}),Object(u.jsx)("div",{className:E.a.name,children:h()})]}),Object(u.jsx)("div",{className:E.a.icon,children:a.icon})]})},M=Z,Q=function(a){var n,i,h=Object(l.useState)(0),v=Object(C.a)(h,2),f=v[0],p=v[1],t=Object(l.useState)(0),j=Object(C.a)(t,2),y=j[0],c=j[1];return Object(l.useEffect)(function(){b().then(function(F){return c(F)})},[]),Object(l.useEffect)(function(){D().then(function(F){return p(F)})},[]),Object(u.jsx)("div",{className:E.a.panel,children:Object(u.jsxs)("div",{className:E.a.summary,children:[Object(u.jsx)(M,{count:(n=a.nodeCount)!==null&&n!==void 0?n:0,type:"node",link:"/node",icon:Object(u.jsx)(K.a,{})}),Object(u.jsx)(M,{count:f,type:"app",link:"/app",icon:Object(u.jsx)(L.a,{})}),Object(u.jsx)(M,{count:y,type:"config",link:"/app",icon:Object(u.jsx)(J.a,{})}),Object(u.jsx)(M,{count:(i=a.clientCount)!==null&&i!==void 0?i:0,type:"client",link:"/client",icon:Object(u.jsx)(V.a,{})})]})})},X=Q,W=e("uQP7"),z=e("RCxd"),k=P.a.confirm,x=function(){var d=Object(O.a)(r.a.mark(function a(n){var i,h,v,f;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(T.d)(Object(T.e)()),h=N.default.loading(i.formatMessage({id:"adding"})),t.prev=2,t.next=5,Object(W.a)(Object(S.a)({},n));case 5:return v=t.sent,h(),f=v.success,f?N.default.success(i.formatMessage({id:"add_success"})):N.default.error(i.formatMessage({id:"add_fail"})),t.abrupt("return",f);case 12:return t.prev=12,t.t0=t.catch(2),h(),N.default.error(i.formatMessage({id:"add_fail"})),t.abrupt("return",!1);case 17:case"end":return t.stop()}},a,null,[[2,12]])}));return function(n){return d.apply(this,arguments)}}(),_=function(){var a=Object(l.useState)({clientCount:0,nodeCount:0}),n=Object(C.a)(a,2),i=n[0],h=n[1],v=function(){H().then(function(t){var j=0;t==null||t.forEach(function(c){c.server_status&&(j=j+c.server_status.clientCount)});var y=0;y=t.length,h({clientCount:j,nodeCount:y})})},f=function(){var p=Object(O.a)(r.a.mark(function t(){var j;return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(W.d)();case 2:return j=c.sent,c.abrupt("return",j.data.length>0);case 4:case"end":return c.stop()}},t)}));return function(){return p.apply(this,arguments)}}();return Object(l.useEffect)(function(){f().then(function(p){if(!p){console.log("No nodes plz add one !");var t="\u8282\u70B9\u5217\u8868\u4E3A\u7A7A\uFF0C\u662F\u5426\u6DFB\u52A0\u5F53\u524D\u8282\u70B9\u3010".concat(window.location.origin,"\u3011\u5230\u8282\u70B9\u5217\u8868\uFF1F");k({icon:Object(u.jsx)(z.a,{}),content:t,onOk:function(){var y=window.location.origin;console.log(" try add ".concat(y," to node list ."));var c={address:y,remark:"\u63A7\u5236\u53F0\u8282\u70B9",status:0};x(c)},onCancel:function(){},okText:"\u9A6C\u4E0A\u6DFB\u52A0"})}})},[]),Object(l.useEffect)(function(){v()},[]),Object(l.useEffect)(function(){var p=setInterval(function(){v()},5e3);return function(){return clearInterval(p)}},[]),Object(u.jsx)(U.a,{pageHeaderRender:!1,children:Object(u.jsx)(X,{clientCount:i.clientCount,nodeCount:i.nodeCount})})},q=g.default=_}}]);
